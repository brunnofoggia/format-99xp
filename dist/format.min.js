import _ from"lodash";import CryptoJS from"crypto-js";var formatMoment={FROMREMOTE:0,TOREMOTE:1},format=function(e,a,r,t={}){var o,c={style:"currency",currency:"BRL",lang:"pt-BR"};if("function"===typeof a)o=a(e,r);else if(null!=e){e=_.isObject(e)||_.isBoolean(e)?e:e+"";var s="object"==typeof a?a:{type:a};switch(s.type){case"regex":e&&(o=e.replace(a.search[r],a.replace[r]));break;case"json":try{o=r===formatMoment.FROMREMOTE?JSON.parse(e):JSON.stringify(e)}catch(e){o=r===formatMoment.FROMREMOTE?JSON.parse("null"):JSON.stringify(null)}break;case"objectArray":o=e,o=r===formatMoment.FROMREMOTE?_.isArray(e)?s.index?_.mapKeys(e,s.index):_.toObject(e):e:_.isPlainObject(e)?_.toArray(e):e;break;case"date":o=r===formatMoment.FROMREMOTE?e.replace(/(\d{4})\-(\d{2})\-(\d{2})/,"$3/$2/$1"):e.replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1");break;case"decimal":case"float":t=_.defaults(t,c),o=r===formatMoment.FROMREMOTE?new Intl.NumberFormat(t.lang,t).format(e).replace(/[^0-9\.\,]/g,""):parseFloat(e.replace(/\./g,"").replace(/\,/g,".").replace(/[^0-9\.\,]/g,""));break;case"integer":case"int":o=parseInt(e.replace(/\./g,"").replace(/\,/g,"").replace(/\D/g,""),10);break;case"boolean":case"bool":o=r===formatMoment.FROMREMOTE?!0===e?"1":"0":"1"===e;break;case"lowercase":o=e.toLowerCase();break;case"uppercase":o=e.toUpperCase();break;case"capitalize":o=e&&e[0].toUpperCase()+e.slice(1).toLowerCase()||"";break;case"send-md5":o=r===formatMoment.FROMREMOTE?e:CryptoJS.MD5(e).toString();break;case"send-sha256":o=r===formatMoment.FROMREMOTE?e:CryptoJS.SHA256(e).toString();break;case"int-str":o=e.replace(/\./g,"").replace(/\,/g,"").replace(/\D/g,"");break;case"decimal-str":o=r===formatMoment.FROMREMOTE?e.replace(/\,/g,"").replace(/\./g,","):e.replace(/\./g,"").replace(/\,/g,".");break;case"float-str":t=_.defaults(t,c),o=r===formatMoment.FROMREMOTE?new Intl.NumberFormat(t.lang,t).format(e).replace(/[^0-9\.\,]/g,""):e.replace(/\./g,"").replace(/\,/g,".").replace(/[^0-9\.\,]/g,"");break;case"array":o=_.isArray(e)?e:_.isPlainObject(e)?_.toArray(e):e;break;case"sendAsArray":o=r===formatMoment.FROMREMOTE?e:_.isPlainObject(e)?_.toArray(e):e;break;case"receiveAsObject":o=r===formatMoment.FROMREMOTE&&_.isArray(e)?_.toObject(e):e}}return o};export{format,formatMoment};